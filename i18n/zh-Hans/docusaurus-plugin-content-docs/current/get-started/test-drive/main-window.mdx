---
id: main-window
title: 主窗口
---
import useBaseUrl from '@docusaurus/useBaseUrl';

import LayoutZonesDiagram from '/img/concepts/layout/layout-zones.png';
import ViewModelScreenshot from '/img/get-started/test-drive/main-window-viewmodel.png';
import AppRunningScreenshot from '/img/get-started/test-drive/main-window-app-running.png';
import VsPreviewerScreenshot from '/img/get-started/test-drive/vs-previewer.png';
import VsPreviewPaneScreenshot from '/img/get-started/test-drive/vs-preview-pane.png';

您现在可以开始 Avalonia 项目之旅了。 我们将从主应用程序窗口开始。打开 **MainWindow.axaml** 文件。

:::info
请注意，在 Avalonia 中，XAML 文件的扩展名为 **.axaml** （而不是 .xaml）。它表示 'Avalonia XAML'，文件扩展名是出于技术原因引入的。
:::

## 发生了什么？

在 **MainWindow.axaml** XAML 文件中，`<Window>...</Window>` XAML 标记表示 Avalonia 窗口。与其他 Avalonia 控件一样，窗口将在目标平台上绘制，并具有 4 个**布局区域**：margin(边距)、border(边框)、padding(内边距) 和 content(内容)。

<img src={LayoutZonesDiagram} alt="" />

## MainWindow 的内容

在 Windows 的内容中, 你可以看到一个 `<TextBlock>...</TextBlock>` XAML 标签。这表示一个 `TextBlock` 控件，它会将 `文本` 绘制到屏幕上。
`TextBlock` 的 `Text` 属性绑定到 **MainViewModel** 类的 **Greeting** 属性。

:::note
类名可能显示为:  
- `MainViewModel`  
- `MainWindowViewModel`  

检查您的项目使用哪个模板来确认名称是否正确。  
:::

```xml title='XAML'
<TextBlock Text="{Binding Greeting}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
```

您可以更改文件 **MainWindowViewModel.cs** 中的文本，以查看 UI 界面上的对此更改的表现。

```csharp title='C#'
namespace GetStartedApp.ViewModels;

public class MainWindowViewModel : ViewModelBase
{
    public string Greeting => "Welcome to Avalonia! This is my added text.";
}
```

<ThemedImage
            alt="Application running"
            className="center"
            sources={{
                light: useBaseUrl('/img/get-started/test-drive/main-window-app-running-light.png'),
                dark: useBaseUrl('/img/get-started/test-drive/main-window-app-running-dark.png'),
            }}
            />

:::info
有关控件布局区域概念的更多信息，请参阅[这里](../../concepts/layout/layout-zones).
:::

## XAML 预览器

如果您使用的 IDE 安装了我们的 IDE 扩展，例如 Rider、Visual Studio 或 Visual Studio Code，您可以在预览器视图中看到 XAML 代码的实时更改。

XAML 预览器在一种特殊的创作模式（称为设计模式）下创建应用实例。当您的应用在设计模式下运行时，它可以执行特殊逻辑，以便与可视化设计器进行协调。`Design.IsDesignMode`

<Tabs groupId="ide">
    <TabItem value="rider" label="Rider">
        导航到 **MainWindow.axaml** 文件并单击编辑器窗口右上角的 **Split View** 按钮。

        <ThemedImage
            alt="Rider Avalonia Previewer Controls"
            className="center"
            sources={{
                light: useBaseUrl('/img/get-started/test-drive/rider-previewer-controls-light.png'),
                dark: useBaseUrl('/img/get-started/test-drive/rider-previewer-controls-dark.png'),
            }}
            />

        <ThemedImage
        alt="Rider with the Avalonia XAML Previewer Open"
        className="center"
        sources={{
            light: useBaseUrl('/img/get-started/test-drive/rider-previewer-light.png'),
            dark: useBaseUrl('/img/get-started/test-drive/rider-previewer-dark.png'),
        }}
        />

    - 构建项目。

     <ThemedImage
        alt="Avalonia XAML Previewer"
        className="center"
        sources={{
            light: useBaseUrl('/img/get-started/test-drive/rider-preview-pane-light.png'),
            dark: useBaseUrl('/img/get-started/test-drive/rider-preview-pane-dark.png'),
        }}
        />

    </TabItem>
    <TabItem value="vs" label="Visual Studio">

导航到 **MainView.axaml** 并单击编辑器窗口顶部的 **Split View** 按钮。

<img className="center" src={VsPreviewerScreenshot} alt="" />

:::info
可能会出现一个红色感叹号图标（左上角）和消息 **设计器正在加载...**。这表示必须先构建项目，预览窗格才会响应。
:::

- 构建项目。
- 将预览窗格向左滚动以查看预览大纲和左上角显示的文本。

<img className="center" src={VsPreviewPaneScreenshot} alt="" />
</TabItem>

</Tabs>

- 删除绑定 `{Binding Greeting}` 并且修改为 `<TextBlock Text="my text" />`

您将看到预览窗格中的新文本随着您的输入而变化。 这是 Avalonia **design-time preview behaviour（设计时预览行为）** 的一个示例，它将帮助您准确、快速地开发用户界面演示。

- 运行项目以查看新文本是否也在运行时出现。

在下一页中，您将向窗口添加一个简单的 `Button`。
